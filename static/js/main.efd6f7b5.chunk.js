(this["webpackJsonpsentnel-paas-website"]=this["webpackJsonpsentnel-paas-website"]||[]).push([[0],{10:function(e,t,a){},13:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a.n(s),i=a(4),c=a.n(i),o=(a(10),function(){for(var e=document.querySelectorAll(".section"),t=e.length-1;t>=0;t--){var a=e[t].offsetTop-160;if(window.pageYOffset>=a){document.querySelectorAll(".current, li > ul.show").forEach((function(e){return e.classList.remove("current","show")}));var s=document.querySelector("li[data-section='".concat(e[t].id,"']"));if(s){var n=s.closest(".subitems")||s.querySelector(".subitems");n&&n.classList.add("show"),s.classList.add("current")}break}}}),r=function(e,t){clearTimeout(e._tId),e._tId=setTimeout((function(){e()}),t)},l=a(5),d=function(e,t){var a=document.getElementById(e);if(a){var s=a.getBoundingClientRect().top+window.pageYOffset+t;window.scrollTo({top:s,behavior:"auto"})}},h=a.p+"static/media/menu.36dfa9b1.svg",p=a.p+"static/media/github.04be58c1.svg",m=a.p+"static/media/sentinel_upper_left.13c5f140.png",u=a(0);var j=function(){var e="hover:bg-gray-100 hover:border-gray-300 active:bg-green-200 active:border-green-300 border-l-4 border-white py-2.5 pl-4 text-left",t=Object(s.useState)(!1),a=Object(l.a)(t,2),n=a[0],i=a[1],c=function(e){d(e,-50),i(!1)};return Object(u.jsxs)("header",{children:[Object(u.jsxs)("div",{id:"header",className:"z-50 items-center bg-slate fixed border-b border-gray-200 h-20 w-full flex justify-between",children:[Object(u.jsx)("a",{href:"/",children:Object(u.jsx)("img",{src:m,alt:"the Sentinel logo",className:"h-20 ml-4"})}),Object(u.jsxs)("nav",{className:"hidden lg:flex bg-slate h-full justify-between items-center text-center text-lg text-gray-500 font-medium",children:[Object(u.jsx)("button",{className:"mx-4 hover:text-raisin",onClick:function(){return c("landing")},children:"Start Here"}),Object(u.jsx)("button",{className:"mx-4 hover:text-raisin",onClick:function(){return c("case-study")},children:"Case Study"}),Object(u.jsx)("button",{className:"mx-4 hover:text-raisin",onClick:function(){return c("presentation")},children:"Presentation"}),Object(u.jsx)("button",{className:"mx-4 hover:text-raisin",onClick:function(){return c("our-team")},children:"Our Team"}),Object(u.jsx)("a",{href:"https://github.com/Sentinel-PaaS/Sentinel-cli/tree/main/sentinel",rel:"noreferrer noopener",target:"_blank",className:"mx-4 hover:text-raisin",children:"Docs"}),Object(u.jsx)("a",{href:"https://github.com/Sentinel-PaaS",rel:"noreferrer noopener",target:"_blank",className:"mx-4 w-20",children:Object(u.jsx)("img",{src:p,className:"w-full h-10",alt:"The github logo"})})]}),Object(u.jsx)("img",{src:h,alt:"a dropdown menu icon",className:"lg:hidden block w-8 h-8 mr-6",onClick:function(){return i(!n)}})]}),Object(u.jsxs)("div",{id:"mobile-menu",className:"lg:hidden ".concat(n?"translate-y-20":"-translate-y-full"," z-0 bg-white fixed flex flex-col text-xl text-gray-800 w-full gap-1 transform transition duration-500 ease-in-out"),children:[Object(u.jsx)("button",{onClick:function(){return c("landing")},className:"".concat(e," mt-1 hover:text-raisin"),children:"Start Here"}),Object(u.jsx)("button",{onClick:function(){return c("case-study")},className:"".concat(e," hover:text-raisin"),children:"Case Study"}),Object(u.jsx)("button",{onClick:function(){return c("presentation")},className:"".concat(e," hover:text-raisin"),children:"Presentation"}),Object(u.jsx)("button",{onClick:function(){return c("our-team")},className:"".concat(e," hover:text-raisin"),children:"Our Team"}),Object(u.jsx)("a",{href:"https://github.com/Sentinel-PaaS/Sentinel-cli/tree/main/sentinel",className:"".concat(e," hover:text-raisin"),children:"Docs"}),Object(u.jsxs)("a",{href:"https://github.com/Sentinel-PaaS",className:"".concat(e," mb-1 hover:text-raisin"),children:[Object(u.jsx)("i",{className:""})," GitHub"]})]})]})},b=a.p+"static/media/Sentinel_logo_on_dark.20294784.svg",f=a.p+"static/media/monitoring.73a7a058.gif",g=a.p+"static/media/cli-v3.ea706e32.png";var x=function(){return Object(u.jsxs)("div",{id:"landing",className:"text-white flex flex-col",children:[Object(u.jsx)("div",{className:"flex flex-col justify-center items-center pt-28 bg-dark-blue xl:py-0",children:Object(u.jsxs)("div",{className:"w-full h-landing xl:h-screen xl:flex",children:[Object(u.jsx)("div",{className:"hidden xl:block bg-slate bgImageFirst w-1/2"}),Object(u.jsx)("img",{className:"xl:hidden w-96 mx-auto mt-24",src:b,alt:"Sentinel logo"}),Object(u.jsxs)("div",{className:"xl:flex xl:flex-col xl:w-1/2 text-center items-center justify-center bg-dark-blue",children:[Object(u.jsx)("h1",{className:"hidden xl:block text-landing font-extrabold mt-32 -mb-6",children:"Sentinel"}),Object(u.jsxs)("p",{className:"mt-10 xl:mt-0 light-text text-gray-300 text-3xl leading-snug text-center px-8 mx-auto max-w-xl",children:["An ",Object(u.jsx)("span",{className:"text-fulvous font-medium",children:"open-source PaaS"})]}),Object(u.jsx)("p",{className:"light-text text-gray-300 text-3xl leading-snug text-center px-8 mx-auto max-w-xl",children:"that provides built-in support"}),Object(u.jsxs)("p",{className:"light-text text-gray-300 text-3xl leading-snug text-center px-8 mx-auto max-w-xl",children:["for ",Object(u.jsx)("span",{className:"text-selectiveyellow font-medium",children:"canary deployments"})]})]})]})}),Object(u.jsxs)("div",{className:"hidden xl:flex h-landing bgImageSecond justify-center items-center text-center bg-fulvous py-20",children:[Object(u.jsx)("h2",{className:"text-6xl font-extrabold w-1/2",children:"Ready to Deploy"}),Object(u.jsxs)("div",{className:"flex flex-col w-1/2 justify-center mx-6 my-10 px-2",children:[Object(u.jsx)("p",{className:"mx-auto text-3xl mb-14 px-4",children:"A convenient command line interface for developers to deploy and update their applications with canary deployments"}),Object(u.jsx)("img",{src:g,alt:"Sentinel cli",className:"mx-auto rounded-lg"})]})]}),Object(u.jsxs)("div",{className:"xl:hidden flex flex-col justify-center items-center text-center bg-fulvous py-20 px-4 h-landing-mobile",children:[Object(u.jsx)("h2",{className:"text-4xl font-extrabold",children:"Ready to Deploy"}),Object(u.jsx)("p",{className:"text-3xl my-10 px-6 max-w-5xl",children:"A convenient command line interface for developers to deploy and update their applications with canary deployments"}),Object(u.jsx)("img",{src:g,alt:"Sentinel cli",className:"rounded-lg"})]}),Object(u.jsxs)("div",{className:"hidden md:flex h-landing bgImageThird justify-center items-center text-center bg-glaucous py-20",children:[Object(u.jsx)("h2",{className:"text-6xl font-extrabold w-1/2",children:"Comprehensive Monitoring"}),Object(u.jsxs)("div",{className:"flex flex-col w-1/2 justify-center mx-6 my-10 px-4",children:[Object(u.jsx)("p",{className:"mx-auto text-3xl mb-14 px-20",children:"Monitoring tools to assist developers in assessing the health and performance of their applications"}),Object(u.jsx)("img",{src:f,alt:"sentinel monitoring",className:"mx-auto rounded-lg shadow-xl"})]})]}),Object(u.jsxs)("div",{className:"md:hidden flex flex-col h-landing justify-center items-center text-center bg-glaucous py-20 px-4",children:[Object(u.jsx)("h2",{className:"text-4xl font-extrabold",children:"Comprehensive Monitoring"}),Object(u.jsx)("p",{className:"text-3xl my-10 px-6 max-w-5xl",children:"Extensive monitoring tools to assist developers in assessing the health and performance of their applications"}),Object(u.jsx)("img",{src:f,alt:"Sentinel monitoring",className:"rounded-lg shadow-xl"})]})]})},y=a.p+"static/media/Overall_Architecture.8930fb38.gif",w=a.p+"static/media/distribution.04bdfebf.png",v=a.p+"static/media/scaling.6d6b6330.png",O=a.p+"static/media/restart.f8dcc2a3.png",N=a.p+"static/media/networking.6540e4e9.png",k=a.p+"static/media/docker-swarm.0161bb65.gif",S=a.p+"static/media/one-process.f7d5be2b.png",C=a.p+"static/media/overlay.3c1ccfc8.gif",T=a.p+"static/media/reverse-proxy1.77f8da47.gif",I=a.p+"static/media/reverse-proxy2.000304e8.gif",A=a.p+"static/media/overlay2.370f066e.gif",P=a.p+"static/media/providers.29e80e98.png",D=a.p+"static/media/dynamic-config.3e773acd.png",R=a.p+"static/media/labels.cc97e46e.png",W=a.p+"static/media/canary.f8426c6e.gif",q=a.p+"static/media/cluster-inspect.0af82690.png",_=a.p+"static/media/prom-dashboard.5c1d5cc4.png",U=a.p+"static/media/grafana-dashboard.23790fb8.png",z=a.p+"static/media/canary-fail.bf34d368.gif",L=a.p+"static/media/inspect-app.3d30ee2c.png",M=a.p+"static/media/cli.24bad47e.png",B=a.p+"static/media/abstractions.9121feb4.png",E=a.p+"static/media/rolling-deploy.9bb32682.gif",F=a.p+"static/media/paas-chart.bc09473c.png",H=a.p+"static/media/heroku.bd500860.png",G=a.p+"static/media/isolation.84882675.png",Y=a.p+"static/media/containers.93ab38bf.png",J=a.p+"static/media/blue_green.7fd91489.png",Q=a.p+"static/media/green_blue.caef347c.png",V=a.p+"static/media/canary_1.02b02648.png",K=a.p+"static/media/canary_2.5d801f26.png",X=a.p+"static/media/canary_3.4e2fbbdd.png",Z=a.p+"static/media/canary_4.a360f240.png";var $=function(){var e="list-outside text-yellowgreen text-3xl items-center",t=e+" pl-8 subitems hide",a="item my-4 hover:text-cyan",s="item my-4 hover:text-cyan",n="inline text-left text-raisin text-lg hover:text-black",i=function(e){return d(e,-100)};return Object(u.jsx)("aside",{id:"sideNav",className:"".concat("sticky xl:flex xl:self-start xl:w-1/5 xl:top-16 right-20 bg-slate border-gray-200 border-r-2 p-4 pl-14 h-screen overflow-y-auto"," translate-x transform transition duration-700 hidden h-0"),children:Object(u.jsxs)("ul",{className:e,children:[Object(u.jsxs)("li",{"data-section":"section-1",className:a,children:[Object(u.jsx)("button",{className:n,onClick:function(){return i("section-1")},children:"1. Introduction"}),Object(u.jsxs)("ul",{className:t,children:[Object(u.jsx)("li",{"data-section":"section-1-1",className:s,children:Object(u.jsx)("button",{className:n,onClick:function(){return i("section-1-1")},children:"1.1. What is a PaaS"})}),Object(u.jsx)("li",{"data-section":"section-1-2",className:s,children:Object(u.jsx)("button",{className:n,onClick:function(){return i("section-1-2")},children:"1.2. Deployment Strategies"})}),Object(u.jsx)("li",{"data-section":"section-1-3",className:s,children:Object(u.jsx)("button",{className:n,onClick:function(){return i("section-1-3")},children:"1.3. Use Case: Apps-R-Us"})}),Object(u.jsx)("li",{"data-section":"section-1-4",className:s,children:Object(u.jsx)("button",{className:n,onClick:function(){return i("section-1-4")},children:"1.4. Sentinel vs. Other PaaS"})}),Object(u.jsx)("li",{"data-section":"section-1-5",className:s,children:Object(u.jsx)("button",{className:n,onClick:function(){return i("section-1-5")},children:"1.5. Sentinel\u2019s Goals"})})]})]}),Object(u.jsxs)("li",{"data-section":"section-2",className:a,children:[Object(u.jsx)("button",{className:n,onClick:function(){return i("section-2")},children:"2. Infrastructure"}),Object(u.jsxs)("ul",{className:t,children:[Object(u.jsx)("li",{"data-section":"section-2-1",className:s,children:Object(u.jsx)("button",{className:n,onClick:function(){return i("section-2-1")},children:"2.1. Cloud-Provider Agnostic"})}),Object(u.jsx)("li",{"data-section":"section-2-2",className:s,children:Object(u.jsx)("button",{className:n,onClick:function(){return i("section-2-2")},children:"2.2. High-Level Infrastructure Overview"})}),Object(u.jsx)("li",{"data-section":"section-2-3",className:s,children:Object(u.jsx)("button",{className:n,onClick:function(){return i("section-2-3")},children:"2.3. Containerized Applications"})})]})]}),Object(u.jsxs)("li",{"data-section":"section-3",className:a,children:[Object(u.jsx)("button",{className:n,onClick:function(){return i("section-3")},children:"3. Managing Containerized Applications"}),Object(u.jsxs)("ul",{className:t,children:[Object(u.jsx)("li",{"data-section":"section-3-1",className:s,children:Object(u.jsx)("button",{className:n,onClick:function(){return i("section-3-1")},children:"3.1. Considerations for Managing Containerized Applications Across Compute Instances"})}),Object(u.jsx)("li",{"data-section":"section-3-2",className:s,children:Object(u.jsx)("button",{className:n,onClick:function(){return i("section-3-2")},children:"3.2. Container Orchestration"})}),Object(u.jsx)("li",{"data-section":"section-3-3",className:s,children:Object(u.jsx)("button",{className:n,onClick:function(){return i("section-3-3")},children:"3.3. Docker Swarm Mode"})}),Object(u.jsx)("li",{"data-section":"section-3-4",className:s,children:Object(u.jsx)("button",{className:n,onClick:function(){return i("section-3-4")},children:"3.4. How Docker Swarm Mode Works"})}),Object(u.jsx)("li",{"data-section":"section-3-5",className:s,children:Object(u.jsx)("button",{className:n,onClick:function(){return i("section-3-5")},children:"3.5. Application & Cluster Scaling"})})]})]}),Object(u.jsxs)("li",{"data-section":"section-4",className:a,children:[Object(u.jsx)("button",{className:n,onClick:function(){return i("section-4")},children:"4. Inter-service Communication"}),Object(u.jsxs)("ul",{className:t,children:[Object(u.jsx)("li",{"data-section":"section-4-1",className:s,children:Object(u.jsx)("button",{className:n,onClick:function(){return i("section-4-1")},children:"4.1. One Process Principle"})}),Object(u.jsx)("li",{"data-section":"section-4-2",className:s,children:Object(u.jsx)("button",{className:n,onClick:function(){return i("section-4-2")},children:"4.2. Overlay Networks"})})]})]}),Object(u.jsxs)("li",{"data-section":"section-5",className:a,children:[Object(u.jsx)("button",{className:n,onClick:function(){return i("section-5")},children:"5. Routing HTTP Requests"}),Object(u.jsxs)("ul",{className:t,children:[Object(u.jsx)("li",{"data-section":"section-5-1",className:s,children:Object(u.jsx)("button",{className:n,onClick:function(){return i("section-5-1")},children:"5.1. Incorporating a Reverse Proxy"})}),Object(u.jsx)("li",{"data-section":"section-5-2",className:s,children:Object(u.jsx)("button",{className:n,onClick:function(){return i("section-5-2")},children:"5.2. Choosing a Reverse Proxy"})})]})]}),Object(u.jsxs)("li",{"data-section":"section-6",className:a,children:[Object(u.jsx)("button",{className:n,onClick:function(){return i("section-6")},children:"6. Canary Deployments"}),Object(u.jsxs)("ul",{className:t,children:[Object(u.jsx)("li",{"data-section":"section-6-1",className:s,children:Object(u.jsx)("button",{className:n,onClick:function(){return i("section-6-1")},children:"6.1. Deploying a Canary"})}),Object(u.jsx)("li",{"data-section":"section-6-2",className:s,children:Object(u.jsx)("button",{className:n,onClick:function(){return i("section-6-2")},children:"6.2. Promoting a Canary"})}),Object(u.jsx)("li",{"data-section":"section-6-3",className:s,children:Object(u.jsx)("button",{className:n,onClick:function(){return i("section-6-3")},children:"6.3. Rolling a Canary Back"})})]})]}),Object(u.jsxs)("li",{"data-section":"section-7",className:a,children:[Object(u.jsx)("button",{className:n,onClick:function(){return i("section-7")},children:"7. Monitoring"}),Object(u.jsxs)("ul",{className:t,children:[Object(u.jsx)("li",{"data-section":"section-7-1",className:s,children:Object(u.jsx)("button",{className:n,onClick:function(){return i("section-7-1")},children:"7.1. Monitoring Architecture Overview"})}),Object(u.jsx)("li",{"data-section":"section-7-2",className:s,children:Object(u.jsx)("button",{className:n,onClick:function(){return i("section-7-2")},children:"7.2. Monitoring a Canary Instance"})})]})]}),Object(u.jsx)("li",{"data-section":"section-8",className:a,children:Object(u.jsx)("button",{className:n,onClick:function(){return i("section-8")},children:"8. Getting Started with Sentinel"})}),Object(u.jsx)("li",{"data-section":"section-9",className:a,children:Object(u.jsx)("button",{className:n,onClick:function(){return i("section-9")},children:"9. Upcoming Work"})})]})})};a(12);var ee=function(e){var t=e.clipInfo,a=e.targetId;return console.log("targetId",a),Object(u.jsxs)("div",{id:a,className:"carousel slide carousel-dark relative","data-bs-ride":"carousel","data-bs-interval":"false",children:[Object(u.jsx)("div",{className:"carousel-indicators absolute right-0 bottom-0 left-0 flex justify-center p-0 my-4",children:t.map((function(e,t){return function(e,t,a){return 0===t?Object(u.jsx)("button",{"data-bs-target":"#".concat(a),"data-bs-slide-to":t,className:"active","aria-current":"true","aria-label":"Slide 1"},e.key):Object(u.jsx)("button",{"data-bs-target":"#".concat(a),"data-bs-slide-to":t,"aria-label":"Slide 1"},e.key)}(e,t,a)}))}),Object(u.jsx)("div",{className:"carousel-inner relative w-full overflow-hidden",children:t.map((function(e,t){return function(e,t){return e.isImage?Object(u.jsxs)("div",{className:"carousel-item ".concat(0===t?"active":""," relative float-left w-full"),children:[Object(u.jsx)("img",{src:e.src,class:"block w-full",alt:e.alt}),Object(u.jsxs)("div",{className:"carousel-caption hidden md:block absolute text-center mb-4",children:[Object(u.jsx)("h5",{className:"text-xl",children:e.header}),Object(u.jsx)("p",{children:e.caption})]})]},e.key):Object(u.jsxs)("div",{className:"carousel-item ".concat(0===t?"active":""," relative float-left w-full"),children:[Object(u.jsx)("video",{className:"w-full",autoPlay:!0,loop:!0,muted:!0,children:Object(u.jsx)("source",{src:e.src,type:"video/mp4"})}),Object(u.jsxs)("div",{className:"carousel-caption hidden md:block absolute text-center mb-4",children:[Object(u.jsx)("h5",{className:"text-xl",children:e.header}),Object(u.jsx)("p",{children:e.caption})]})]},e.key)}(e,t)}))}),Object(u.jsx)("button",{className:"carousel-control-prev absolute top-0 bottom-0 flex items-center justify-center p-0 text-center border-0 hover:outline-none hover:no-underline focus:outline-none focus:no-underline left-0",type:"button","data-bs-target":"#".concat(a),"data-bs-slide":"prev",children:Object(u.jsx)("span",{className:"visually-hidden",children:"Previous"})}),Object(u.jsx)("button",{className:"carousel-control-next absolute top-0 bottom-0 flex items-center justify-center p-0 text-center border-0 hover:outline-none hover:no-underline focus:outline-none focus:no-underline right-0",type:"button","data-bs-target":"#".concat(a),"data-bs-slide":"next",children:Object(u.jsx)("span",{className:"visually-hidden",children:"Next"})})]})},te=a.p+"static/media/init.efa16da0.mp4",ae=a.p+"static/media/deploy.dd585c39.mp4",se=a.p+"static/media/browser.759a5cbf.mp4",ne=a.p+"static/media/canary_deploy.332d3c8f.mp4",ie=a.p+"static/media/show_canary_todos_browser.6de4af4c.mp4",ce=a.p+"static/media/deploy_catnip.34998541.mp4",oe=a.p+"static/media/inspect_2_apps_browser.1dad0467.mp4",re=a.p+"static/media/cluster_inspect.9960e2f2.mp4",le=a.p+"static/media/inspect_app.1959895e.mp4",de=a.p+"static/media/browser_canary.fb2b89a3.mp4",he=a.p+"static/media/grafana_dash.9ab86b2f.png",pe=a.p+"static/media/browser_promoted.d46a2bbf.mp4",me=a.p+"static/media/canary_promote.8c347fab.mp4",ue=a.p+"static/media/cluster_scale.150f9ad8.mp4",je=a.p+"static/media/inspect_app_after_scale.ac14e0ce.mp4",be=a.p+"static/media/inspect_app.8059f7b2.mp4",fe=a.p+"static/media/scale_app.ed433a89.mp4",ge=[{src:te,caption:"Apps-R-Us initializes the Sentinel PaaS",alt:"sentinel init",header:"sentinel init",isImage:!1,key:"intro-0"},{src:ae,caption:"Apps-R-Us deploys their first Todos application",alt:"sentinel deploy",header:"sentinel deploy",isImage:!1,key:"intro-1"},{src:se,caption:"Apps-R-Us checks the application in the browser behind a live URL",alt:"Browser Demo of app",header:"In the Browser",isImage:!1,key:"intro-2"},{src:ne,caption:"Apps-R-Us deploys a canary version of the Todos app",alt:"Canary deployment",header:"sentinel canary deploy",isImage:!1,key:"intro-3"},{src:ie,caption:"Apps-R-Us clears the cookies and refreshes the page to view the canary version",alt:"Show the canary version in the browser",header:"In the Browser",isImage:!1,key:"intro-4"}],xe=[{src:ce,caption:"Apps-R-Us deploys a second application called Catnip",alt:"deploy catnip app",header:"sentinel deploy",isImage:!1,key:"ca-0"},{src:oe,caption:"Apps-R-Us views both the Todos and Catnip app",alt:"show catnip app in browser",header:"In the Browser",isImage:!1,key:"ca-1"},{src:re,caption:"Apps-R-Us confirms that there is only one node in the Cluster, on which both of these containers are hosted",alt:"Inspecting the cluster",header:"sentinel cluster inspect",isImage:!1,key:"ca-2"}],ye=[{src:ne,caption:"Apps-R-Us deploys a canary version of the Todos app",alt:"Canary deployment",header:"sentinel canary deploy",key:"cd-0"},{src:le,caption:"Apps-R-Us inspects the Todos app",alt:"sentinel inspect app",header:"sentinel inspect app",isImage:!1,key:"cd-1"},{src:de,caption:"Apps-R-Us clears the cookies and refreshes the page to view the canary version",alt:"In browser, viewing canary version",header:"In the Browser",isImage:!1,key:"cd-2"},{src:he,caption:"Apps-R-Us uses the built in metrics dashboard to evaluate the health of their application. Production is on the left and the canary version is on the right",alt:"Grafana Dash board",header:"Grafana Dashboard",isImage:!0,key:"cd-3"},{src:me,caption:"Apps-R-Us decides the canary version is ready to promote",alt:"sentinel canary promote",header:"sentinel canary promote",isImage:!1,key:"cd-4"},{src:pe,caption:"Apps-R-Us verifies that the promotion was successful",alt:"inspect promoted canary version in browser",header:"In the Browser",isImage:!1,key:"cd-5"}],we=[{src:be,caption:"Apps-R-Us inspects the Todos application",alt:"sentinel inspect app",header:"sentinel inspect app",isImage:!1,key:"sd-0"},{src:fe,caption:"Apps-R-Us scales up the Todos app",alt:"sentinel scale app",header:"sentinel scale app",isImage:!1,key:"sd-1"},{src:je,caption:"There are now 4 instances of the application in production",alt:"inspect app",header:"sentinel inspect app",isImage:!1,key:"sd-2"},{src:ue,caption:"Apps-R-Us scales up the cluster by adding a worker node",alt:"scaling the cluster",header:"sentinel cluster scale",isImage:!1,key:"sd-3"}];var ve=function(){var e="section text-5xl font-extrabold mt-14 mb-6 text-dark-blue",t="section text-4xl font-bold mt-16 mb-4 text-dark-blue",a="text-3xl font-bold mt-12 mb-4 text-dark-blue",s="my-7 text-dark-blue",n="list-outside list-disc text-gray-300 text-2xl items-center",i="list-outside list-decimal text-2xl items-center text-dark-blue",c="inline text-dark-blue text-xl",o="ml-7 text-dark-blue",r="mx-auto my-8 rounded-lg",l="underline text-blue-500";return Object(u.jsxs)("div",{className:"flex",children:[Object(u.jsx)($,{}),Object(u.jsx)("div",{id:"case-study",className:"w-xl-casestudy xl:pt-0 flex",children:Object(u.jsxs)("div",{className:"prose ml-6 leading-9 w-10/12 text-left text-gray-700 text-xl",children:[Object(u.jsx)("h1",{className:"mt-24 mb-16 text-6xl font-black",children:"Case Study"}),Object(u.jsx)("h2",{id:"section-1","data-section":"section-1",className:e,children:"1. Introduction"}),Object(u.jsx)("p",{className:s,children:"Sentinel is an open source, cloud-agnostic, self-hosted platform as a service (PaaS) that can easily deploy multiple database-backed web applications, with built in support for upgrading applications via canary deployments."}),Object(u.jsxs)("p",{className:s,children:["Sentinel makes deploying applications ",Object(u.jsx)("em",{children:"easy"}),", by providing a custom command line interface. The CLI interacts with the Sentinel Control Plane, and the Control Plane in turn manages the Sentinel Cluster, on which a developer\u2019s applications live. From the CLI, developers provide Sentinel with a Dockerized image of their application. Then Sentinel provisions the necessary infrastructure and deploys the application, abstracting away tedious deployment details. With a single CLI command, applications go from running on a developer\u2019s laptop to running in production in the cloud behind a live URL."]}),Object(u.jsxs)("p",{className:s,children:["Sentinel makes deploying applications ",Object(u.jsx)("em",{children:"safe"}),", by supporting canary deployments, equipped with the necessary monitoring tools. When a new feature or update is ready to be tested in production, Sentinel can deploy a canary with a simple CLI command. Users can split traffic and implement sticky sessions, if desired. After the canary is deployed, developers can adjust the amount of traffic being routed to the canary at any time to further test the canary\u2019s performance. Every application deployed through Sentinel is automatically integrated with a monitoring stack that delivers system- and application-level metrics, which makes judging the health of a canary straightforward. Whether a developer decides a canary is healthy enough to promote to production, or if the canary needs to be rolled back, a simple command from the CLI will get the job done. Here\u2019s a look at the commands the Sentinel CLI offers:"]}),Object(u.jsx)("img",{src:M,alt:"CLI commands",className:r+" large-img"}),Object(u.jsx)("p",{className:s,children:"There were numerous engineering challenges and design decisions our team faced during the creation of Sentinel which we will focus on throughout this case study. Before we get into a discussion of Sentinel\u2019s design, we\u2019ll first provide some context by defining platform as a service, comparing canaries to other deployments strategies, and providing an overview of existing solutions in this area."}),Object(u.jsx)("h3",{id:"section-1-1",className:t,children:"1.1. What is a PaaS"}),Object(u.jsxs)("p",{className:s,children:["Deploying a web application requires having a physical server to run on, and network hardware to connect it to the internet. It also requires an appropriate operating system and installing the necessary dependencies. There are essentially three approaches to handling these needs, with varying degrees of abstraction. The bare metal approach to deploying a web application involves managing all these details, from application level concerns down to the physical hardware. Infrastructure as a Service (IaaS) abstracts away all the physical details, everything up to the OS level, but developers still have to manage the servers. A Platform as a Service (PaaS) goes one step further, abstracting away even the OS and server configurations, so that developers only have to provide the platform with a runnable web application.",Object(u.jsx)("sup",{children:Object(u.jsx)("a",{href:"#fn1",children:"1"})})]}),Object(u.jsx)("img",{src:B,alt:"-aas Abstraction Diagram",className:r+" medium-img"}),Object(u.jsx)("p",{className:s,children:"Sentinel provides developers with all the functionality expected of a PaaS. But part of what sets Sentinel apart, is that apps hosted on it can easily be upgraded via canary deployments. So before comparing Sentinel explicitly to other options in this domain, a brief review of deployments options, and the benefits of canary deployments, is in order."}),Object(u.jsx)("h3",{id:"section-1-2",className:t,children:"1.2. Deployment Strategies"}),Object(u.jsxs)("p",{className:s,children:["There are several deployment strategies that developers can use to deploy updates to their applications.",Object(u.jsx)("sup",{children:Object(u.jsx)("a",{href:"#fn2",children:"2"})})," An ideal deployment strategy would adhere to the following guidelines:"]}),Object(u.jsxs)("ul",{className:n,children:[Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{className:c,children:" Minimize the harm done by any unforeseen bugs in the new version of the application."})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{className:c,children:" Mitigate the amount of down time it takes to make the updates."})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{className:c,children:" Be able to quickly and easily revert back to the previous version, if for any reason, the new version of the application is not performing as expected."})})]}),Object(u.jsx)("h4",{className:a,children:"Blue Green Deployments"}),Object(u.jsx)("p",{className:s,children:"One strategy is blue-green deployments. This technique utilizes two identical environments, a \u201cblue\u201d (production) and a \u201cgreen\u201d (staging) environment. These environments are identical with the exception of the application version."}),Object(u.jsx)("img",{src:J,alt:"blue green deployment",className:r+" deployment-img"}),Object(u.jsx)("p",{className:s,children:"The staging environment will host the new version which will undergo testing, done by the developers, while the production environment will contain the existing application and is handling real users requests. Once testing on the staging environment is complete, all requests are shifted from the production (blue) environment to the staging (green) environment thus making the staging environment the new production environment."}),Object(u.jsx)("img",{src:Q,alt:"blue green deployment",className:r+" deployment-img"}),Object(u.jsx)("strong",{children:Object(u.jsx)("p",{className:s,children:"Pros:"})}),Object(u.jsxs)("ul",{className:n,children:[Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{className:c,children:"Downtime: Little to none involved when shifting the traffic from one environment to the other."})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{className:c,children:"Rollbacks: If for any reason the new version of the application isn\u2019t performing well then all requests can easily be shifted back to the previous environment."})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{className:c,children:"Fairly simple to implement"})})]}),Object(u.jsx)("strong",{children:Object(u.jsx)("p",{className:s,children:"Cons:"})}),Object(u.jsxs)("ul",{className:n,children:[Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{className:c,children:"Unforeseen bugs: Any and all bugs in the new version of the application will be exposed to all end users all at once."})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{className:c,children:"Costly: blue green deployments require replicating the entire production environment."})})]}),Object(u.jsx)("h4",{className:a,children:"Rolling Deployments"}),Object(u.jsx)("p",{className:s,children:"Another strategy is rolling deployments, which sequentially update application instances. In this example there are three instances of an application which have to be updated. To do this we can follow a simple set of rules:"}),Object(u.jsxs)("ul",{className:n,children:[Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{className:c,children:" Stop routing requests to the first instance of the application and take it down."})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{className:c,children:" Start up a new instance of the application."})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{className:c,children:" Route new requests to the new version of the application."})})]}),Object(u.jsx)("img",{src:E,alt:"Rolling Deployments",className:r+" deployment-img"}),Object(u.jsx)("strong",{children:Object(u.jsx)("p",{className:s,children:"Pros:"})}),Object(u.jsxs)("ul",{className:n,children:[Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{className:c,children:"Downtime: Little to no downtime."})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{className:c,children:"Rollbacks: Easy to reverse the process by taking the exact opposite steps."})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{className:c,children:"Less infrastructure resources needed compared to blue green deployments. "})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{className:c,children:"Unforeseen Bugs: Not all users will be affected and bugs will be caught earlier."})})]}),Object(u.jsx)("strong",{children:Object(u.jsx)("p",{className:s,children:"Cons:"})}),Object(u.jsx)("ul",{className:n,children:Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{className:c,children:"Lack of control over how users are routed to the new application version. Users are simply routed to the new application version as instances are updated. There is no fine grain control over the percentage of traffic being routed to the new version."})})}),Object(u.jsx)("h4",{className:a,children:"Canary Deployments"}),Object(u.jsx)("p",{className:s,children:"The general idea behind canary deployments is to split off a small portion of the user traffic from the current production version and direct it to the new version of the application. This cautious approach mitigates any adverse consequences that may occur as a result of introducing unforeseen bugs, as only a small percentage of users would be affected. Splitting traffic can target specific user groups, such as by geographic region. However, the diagram below depicts a simple rule wherein 20% of all requests are diverted to the new version of the application."}),Object(u.jsx)("img",{src:V,alt:"canary stage 1",className:r+" deployment-img"}),Object(u.jsx)("p",{className:s,children:"If faced with a bad deployment and the need to rollback, traffic is no longer sent to the new application and the original production version handles 100% of the requests."}),Object(u.jsx)("img",{src:Z,alt:"canary bad deployment",className:r+" deployment-img"}),Object(u.jsx)("p",{className:s,children:"But, in the event that the canary is performing well, traffic to the canary can be increased incrementally, gradually bolstering confidence that the new version is production ready."}),Object(u.jsx)("img",{src:K,alt:"canary traffic increase",className:r+" deployment-img"}),Object(u.jsx)("p",{className:s,children:"When a developer is confident that the canary version is healthy, it can be promoted to the new production version. Depending on whether there are multiple instances of the production application running, the canary promotion process may need to incorporate some of the procedures from rolling deployments, previously discussed."}),Object(u.jsx)("img",{src:X,alt:"canary promote",className:r+" deployment-img"}),Object(u.jsx)("strong",{children:Object(u.jsx)("p",{className:s,children:"Pros:"})}),Object(u.jsxs)("ul",{className:n,children:[Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{className:c,children:"Downtime: Little to none, applications can remain running while the update is being pushed out."})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{className:c,children:"Rollbacks: Easy to do, stop routing requests to canary."})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{className:c,children:"Ability to rapidly push out updates and get immediate feedback on how their changes perform in a production environment with real users."})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{className:c,children:"Unforeseen Bugs: Low risk, small percentage of users exposed to new bugs."})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsxs)("p",{className:c,children:["High degree of control over the percentage of users that see the new updates.",Object(u.jsx)("sup",{children:Object(u.jsx)("a",{href:"#fn3",children:"3"})})]})})]}),Object(u.jsx)("strong",{children:Object(u.jsx)("p",{className:s,children:"Cons:"})}),Object(u.jsx)("ul",{className:n,children:Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{className:c,children:"Complex to implement traffic splitting between application versions."})})}),Object(u.jsx)("p",{className:s,children:"Canary deployments address some of the weaknesses of the previously mentioned deployment strategies. In comparison to blue-green deployments, canary deployments are an effective use of resources, as they don\u2019t require a duplication of the entire production environment. Unlike rolling deployments, canary deployments do provide a high degree of control over the users interacting with the updated application. The main con of a canary deployment is the complexity involved in traffic splitting, but this is a complexity that Sentinel can take care of for its users. In other words, Sentinel abstracts away these complexities so that developers can take advantage of the benefits canary deployments offer."}),Object(u.jsx)("h3",{id:"section-1-3",className:t,children:"1.3. Use Case: Apps-R-Us"}),Object(u.jsx)("p",{className:s,children:"To illustrate who might benefit from Sentinel, imagine a growing business called Apps-R-Us. Apps-R-Us is a web development consultancy, and anyone can hire them to build their web apps. On any given day they would be responsible for developing new applications or updating existing ones. For example, they could be making grade-tracking software for a local school district, while simultaneously making updates to a registration portal for a local sports league."}),Object(u.jsx)("p",{className:s,children:"Apps-R-Us is responsible for many applications at different stages of development and are in need of a PaaS that can manage the infrastructure when deploying applications as well as updating existing ones. They want their development team to focus on what matters most\u2013 developing their applications. Due to their diverse clientele, they want control over the PaaS in order to tailor it to their clients\u2019 needs. The problems that Apps-R-Us faces are common and illustrate our motivation behind why we built Sentinel. As we go over Sentinel\u2019s design in more detail in what follows, we\u2019ll periodically check in with Apps-R-Us to see how Sentinel meets their needs."}),Object(u.jsx)(ee,{clipInfo:ge,targetId:"intro"}),Object(u.jsx)("h3",{id:"section-1-4",className:t,children:"1.4. Sentinel vs. Other PaaS"}),Object(u.jsx)("p",{className:s,children:"There are many providers in the PaaS space and we can categorize them along a number of lines. On the one hand, there are closed source options, such as Heroku and Elastic Beanstalk. These options tend to have many features, but that doesn\u2019t necessarily mean they are going to support canary deployments out of the box. Additionally, these options will most likely come at a monthly cost just to use them."}),Object(u.jsx)("img",{src:F,alt:"PaaS Chart Comparison",className:r+" medium-img"}),Object(u.jsx)("p",{className:s,children:"The big cloud providers tend to offer their own PaaS that are tightly integrated with their cloud infrastructure. If they decide to raise the price, make significant changes, or deprecate support for something, developers have to weigh the option of whether or not it\u2019s worth the time, effort, and money to make the switch to a new PaaS that better suits their needs. With a closed source option, users will be at the mercy of the PaaS as to when or if they make any changes to the infrastructure."}),Object(u.jsxs)("p",{className:s,children:["To highlight the last point, when Heroku started back in 2007 they were using AWS EC2-Classic instances",Object(u.jsx)("sup",{children:Object(u.jsx)("a",{href:"#fn4",children:"4"})}),". At the time these were the latest and greatest compute instances available at AWS. But, in 2013 AWS launched a more performant and efficient VPC architecture.",Object(u.jsx)("sup",{children:Object(u.jsx)("a",{href:"#fn5",children:"5"})})," Only recently in October 2021 did Heroku make the switch to the new model that AWS offers.",Object(u.jsx)("sup",{children:Object(u.jsx)("a",{href:"#fn6",children:"6"})})," So, during that 8 year period of time Heroku customers were unable to take advantage of a more performant and efficient architecture. Because Heroku, and the other aforementioned PaaS are closed sourced, there is no way to update the source code for any reason."]}),Object(u.jsx)("img",{src:H,alt:"Heroku Timeline",className:r}),Object(u.jsx)("p",{className:s,children:"On the other hand, there are open source PaaS providers, such as CapRover. With the open source option, development teams will have more control because there is no longer a 3rd party managing the platform. Developers have unimpeded access to the source code, which means they have the opportunity to shape it to their needs. To summarize these tradeoffs: while the open-source options provide more flexibility and are cheaper, they lack many of the features and support provided by a closed-source option."}),Object(u.jsx)("p",{className:s,children:"A business such as Apps-R-Us wants a streamlined way to deploy applications, and a cautious way of upgrading those applications, but does not need all the bells and whistles\u2013or want the costs\u2013involved with a closed-source PaaS. For such companies, Sentinel strikes the right balance."}),Object(u.jsx)("h3",{id:"section-1-5",className:t,children:"1.5. Sentinel\u2019s Goals"}),Object(u.jsx)("p",{className:s,children:"We now have a solid understanding of what Sentinel is and what it means to be an open source, cloud-agnostic, platform as a service with built in support for canary deployments. As a brief recap, when we set out to build Sentinel we had the following goals in mind:"}),Object(u.jsxs)("ul",{className:n,children:[Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{className:c,children:"Provide users with a convenient CLI to deploy and manage their applications."})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{className:c,children:"Allow users to deploy Sentinel with any cloud provider."})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{className:c,children:"Support applications with a variety of programming languages and runtime environments."})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{className:c,children:"Support canary deployments as a means of updating existing applications."})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{className:c,children:"Provide monitoring tools to verify the health of canary and production applications."})})]}),Object(u.jsx)("p",{className:s,children:"Naturally, having these goals drove many of our design decisions. In what follows, we\u2019ll unpack those decisions, and see how Sentinel was built."}),Object(u.jsx)("h2",{id:"section-2","data-section":"section-2",className:e,children:"2. Infrastructure"}),Object(u.jsx)("p",{className:s,children:"Sentinel takes care of provisioning the infrastructure necessary for hosting users\u2019 applications. In this section, we\u2019ll consider how Sentinel provides users with flexibility, in terms of where their apps are hosted, and what sorts of apps they can deploy."}),Object(u.jsx)("h3",{id:"section-2-1",className:t,children:"2.1. Cloud-Provider Agnostic"}),Object(u.jsx)("p",{className:s,children:'To be a "cloud-provider agnostic"  platform means that Sentinel must be deployable using any major cloud-provider\'s servers, with minimal friction involved in switching between them. To achieve this goal, Sentinel only provisions the bare minimum resources needed from any given cloud provider, and the rest of the logic is kept "in house."'}),Object(u.jsx)("p",{className:s,children:"Each cloud provider has plenty of custom services to simplify running applications in the cloud. But because they are not compatible between cloud providers, using them locks the user into a particular provider. For example, by using AWS Elastic Container Service to manage containers, a developer would have to learn a completely new set of tools in order to switch to Google Cloud Platform."}),Object(u.jsxs)("p",{className:s,children:["However, all cloud providers have at least one offering in common: Linux virtual servers! By limiting Sentinel to only provisioning simple compute instances, and not using any other custom cloud services, Sentinel can be deployed on any cloud provider.",Object(u.jsx)("sup",{children:Object(u.jsx)("a",{href:"#fn7",children:"7"})})]}),Object(u.jsx)("p",{className:s,children:"Of course, along with compute instances, Sentinel needs some consistent, cloud-agnostic way to perform key actions, such as: scaling compute instances up and down, installing and scaling applications, and managing permissions and firewalls. Using, say, AWS\u2019s Cloudformation to do this on Amazon\u2019s EC2 instances, would again tie Sentinel more tightly to a particular provider. So, to provision compute instances, and interact with them, Sentinel uses a combination of Terraform and Ansible. With these two tools, basically anything that can be done on the command line, can be done programmatically on a remote compute instance."}),Object(u.jsx)("h3",{id:"section-2-2","data-section":"section-2",className:t,children:"2.2. High-Level Infrastructure Overview"}),Object(u.jsxs)("p",{className:s,children:["Let\u2019s see what this infrastructure looks like at a high-level. Recall the ",Object(u.jsx)("code",{children:"sentinel init"})," command from the initial demo up above that created Sentinel\u2019s infrastructure in the user\u2019s cloud account. The following diagram (and the notes which follow), explain in more detail what was going on there:"]}),Object(u.jsx)("img",{src:y,alt:"monolith diagram",className:r+" min-w-1200",id:"overall-architecture-img"}),Object(u.jsxs)("p",{className:s,children:["The first thing to note is the Sentinel CLI, which is running on the developer\u2019s computer, outside of the cloud infrastructure. When a developer runs ",Object(u.jsx)("code",{children:"sentinel init"}),", some initial Terraform and Ansible code is triggered to create the Sentinel Control Plane."]}),Object(u.jsx)("p",{className:s,children:"The Sentinel Control Plane is the first cloud compute instance that is part of Sentinel\u2019s infrastructure, and it\u2019s the brains of the operation. It\u2019s the server that\u2019s responsible for provisioning the further servers users\u2019 apps will run on, and for deploying the apps themselves to those servers."}),Object(u.jsxs)("p",{className:s,children:["The Sentinel Cluster is composed of the servers that actually host users\u2019 applications. On ",Object(u.jsx)("code",{children:"sentinel init"}),", one server is created in the Cluster. When a user needs to scale up with a new server, they run a command on the CLI, and the Control Plane adds it to the Cluster using Terraform."]}),Object(u.jsx)("p",{className:s,children:"Once compute instances are provisioned, Ansible is used to carry-out most of the ongoing system level tasks for these instances, such as copying over files, adjusting permissions, installing software, and so on. For example, each new server must immediately have Docker installed on it, and be set as running in swarm mode (more on the swarm in a bit). Other tasks, such as deploying and scaling applications, are directed specifically to the Docker daemon on the \u201cmanager\u201d server (again, for the term \u201cmanager,\u201d see discussion of Docker Swarm Mode, below)."}),Object(u.jsxs)("p",{className:s,children:["Finally, the Control Plane also communicates with the Docker daemon's API to get information about the current state of deployed applications. By default, the Docker daemon listens for requests on a local unix socket, and this is what is communicated with when running Docker commands locally (such as ",Object(u.jsx)("code",{children:"docker run"}),").",Object(u.jsx)("sup",{children:Object(u.jsx)("a",{href:"#fn8",children:"8"})})," But it\u2019s also possible to securely expose the Docker daemon on a port for remote access. It would have been possible to do some of the aforementioned application deployment and management via the Docker API directly, as well. However, because of the complexity of Sentinel\u2019s Docker configurations, it was more straightforward to separate out the task of deploying apps, which is accomplished via Docker Compose files with Ansible, and getting information about the state of deployed applications, which is handled via API calls."]}),Object(u.jsx)("h3",{id:"section-2-3",className:t,children:"2.3. Containerized Applications"}),Object(u.jsx)("p",{className:s,children:"We\u2019ve now covered how Sentinel\u2019s infrastructure provides its users with flexibility, in terms of where their apps are hosted. Ideally, users should not be limited in terms of the sorts of applications they can deploy, and space utilization on any given compute instance should be maximized. However, hosting multiple applications in multiple runtimes on the same machine raises some concerns. For example, there might be conflicting dependencies: one app might need an older version of python, one might need a newer version. There are also security concerns, as the user may not want every app potentially accessible to every other app. Some isolation is desirable. In general, there are two possible solutions to these issues: virtual machines and containers."}),Object(u.jsx)("img",{src:G,alt:"VMs vs Containers",className:r+" medium-img"}),Object(u.jsxs)("p",{className:s,children:['Pictured on the left hand side of the above diagram, virtual machines involve running multiple operating systems on the same server. Though there is in fact only one machine, this is achieved by having a hypervisor divide up and emulate its resources into multiple "virtual machines" that are compatible with each guest OS. So while this does achieve isolation, it is isolation at the machine or operating system level, and it\u2019s a very resource heavy way of achieving isolation.',Object(u.jsx)("sup",{children:Object(u.jsx)("a",{href:"#fn9",children:"9"})})]}),Object(u.jsxs)("p",{className:s,children:["A better solution for our use case is containerized applications (pictured on the right hand side of the diagram). With containerized applications, isolation is still achieved, but at the process level.",Object(u.jsx)("sup",{children:Object(u.jsx)("a",{href:"#fn10",children:"10"})})," This is much less resource intensive than isolating a whole emulated OS (just look at how many more containers fit on the right-hand side of the diagram!). And as for dependencies, even if the host operating system does not have all the dependencies necessary for running an application, if it has Docker installed, it can run a container with those dependencies, without installing them on the host computer. This allows users to deploy any app they like, as long as it\u2019s containerized."]}),Object(u.jsx)("p",{className:s,children:"Just to illustrate how this looks in the context of Sentinel\u2019s overall architecture, we can zoom in on one of the nodes in the cluster, and see that it has many containerized applications on it:"}),Object(u.jsx)("img",{src:Y,alt:"Containers on node",className:r+" small-img"}),Object(u.jsx)("p",{className:s,children:"Not only are users\u2019 applications deployed as containers, but so are their associated databases and monitoring tools. There are other ways of containerizing applications, but Docker was the clear choice, due to its widespread use."}),Object(u.jsx)("p",{className:s,children:"The benefits of containerized applications are illustrated in the demo below, where Apps-R-Us uses Sentinel to deploy a second application into their Cluster."}),Object(u.jsx)(ee,{clipInfo:xe,targetId:"containerizedApps"}),Object(u.jsx)("p",{className:s,children:"Of course, no matter how useful containers are, hosting a lot of containers raises some new challenges that Sentinel had to solve. We discuss these challenges and Sentinel's solutions in the next section."}),Object(u.jsx)("h2",{id:"section-3",className:e,children:"3. Managing Containerized Applications"}),Object(u.jsx)("p",{className:s,children:"As users deploy more and more containerized applications, at some point, the infrastructure will need to be scaled. Similarly, as their deployed applications get more traffic, application instances will also need to be scaled. Vertical scaling of infrastructure, such as increasing memory and disk space, could partially address the first issue, but this is only possible up to a finite degree. Instead, Sentinel supports horizontal scaling of applications and servers by adding instances as needed."}),Object(u.jsx)("h3",{id:"section-3-1",className:t,children:"3.1. Considerations for Managing Containerized Applications Across Compute Instances"}),Object(u.jsx)("p",{className:s,children:"As containerized applications are deployed and scaled across compute instances, the following challenges arise:"}),Object(u.jsxs)("ul",{className:n,children:[Object(u.jsxs)("li",{className:"".concat(o," pl-4"),children:[Object(u.jsxs)("p",{className:c,children:[Object(u.jsx)("em",{children:"Distribution"}),": What server should new applications be deployed on? And how can we keep track of where each application is running?"]}),Object(u.jsx)("img",{src:w,alt:"distribution",className:r+" small-img center-content ml-12"})]}),Object(u.jsxs)("li",{className:"".concat(o," pl-4"),children:[Object(u.jsxs)("p",{className:c,children:[Object(u.jsx)("em",{children:"Scaling & Load Balancing"}),": How do applications get scaled horizontally? And once scaled, how does load balancing between the application instances work? As servers are scaled up and down, how do existing containers get re-distributed?"]}),Object(u.jsx)("img",{src:v,alt:"scaling",className:r+" small-img center-content ml-12"})]}),Object(u.jsxs)("li",{className:"".concat(o," pl-4"),children:[Object(u.jsxs)("p",{className:c,children:[Object(u.jsx)("em",{children:"Networking"}),": How can containers communicate with one another? For example, if an application is running in a separate container than its database, they would need a way to communicate."]}),Object(u.jsx)("img",{src:N,alt:"networking",className:r+" small-img center-content ml-12"})]}),Object(u.jsxs)("li",{className:"".concat(o," pl-4"),children:[Object(u.jsxs)("p",{className:c,children:[Object(u.jsx)("em",{children:"Restart"}),": When a server or a container crashes, how does the container get restarted on a healthy server with minimal downtime?"]}),Object(u.jsx)("img",{src:O,alt:"restart",className:r+" small-img center-content ml-12"})]})]}),Object(u.jsx)("h3",{id:"section-3-2",className:t,children:"3.2. Container Orchestration"}),Object(u.jsxs)("p",{className:s,children:["To manage all of the complexities introduced in the previous section, Sentinel uses a container orchestrator. A container orchestrator automates the deployment, management, scaling and networking of containers.",Object(u.jsx)("sup",{children:Object(u.jsx)("a",{href:"#fn11",children:"11"})})," In terms of our use case, these are the key features of a container orchestrator that, collectively, help solve many of the challenges of managing containers across servers:"]}),Object(u.jsxs)("ul",{className:n,children:[Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsxs)("p",{className:c,children:[Object(u.jsx)("em",{children:"Resource Scheduling"}),": refers to strategies a container orchestrator uses to determine which server to put a container on. As the demands of applications grow and shrink, this feature automatically handles distribution and redistribution of containers across servers to optimize existing resources."]})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsxs)("p",{className:c,children:[Object(u.jsx)("em",{children:"Restart Policy"}),": A restart policy can be designated for containers so that if a container crashes, the orchestrator will automatically attempt to restart it. In the same way, if a server crashes, the orchestrator will detect this and schedule the containers to run on an available server."]})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsxs)("p",{className:c,children:[Object(u.jsx)("em",{children:"Scaling & Load Balancing"}),": Orchestrators make it easy to scale containers up and down as needed by running a simple command. Once scaled, load balancing between the application instances is a built-in feature."]})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsxs)("p",{className:c,children:[Object(u.jsx)("em",{children:"Service Discovery"}),": When a container is created, the user provides a name for it and it gets assigned its own IP address. It\u2019s important to note that containers are ephemeral, meaning they can stop and restart at any time. When a container is restarted, it receives a new IP address, so it would be difficult to know how to route traffic for an application based on containers' IP addresses alone. To address this, orchestrators use Service Discovery which uses an embedded DNS server to automatically resolve that given container name to the IP address and port of the associated container. If a container is restarted, and receives a new IP address, the internal DNS record will be updated. Service Discovery is imperative for communication between containers as well as routing external requests."]})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsxs)("p",{className:c,children:[Object(u.jsx)("em",{children:"Overlay Networks"}),": container orchestrators provide overlay networks which enable containers to communicate with each other across a virtual layer 2 network that allows physically separated servers to communicate as though they were physically connected via LAN. For each network a container is added to, it receives another virtual IP address."]})})]}),Object(u.jsx)("h3",{id:"section-3-3",className:t,children:"3.3. Docker Swarm Mode"}),Object(u.jsx)("p",{className:s,children:"While researching container orchestrators, we considered AWS Elastic Container Service but quickly ruled it out. In keeping with a cloud agnostic approach, Sentinel should not be tied to a cloud provider for such a major piece of functionality. We also considered Kubernetes, but it provided more functionality than our use case required, so the added complexity was not justified."}),Object(u.jsx)("p",{className:s,children:"Docker Swarm Mode was the clear choice. It\u2019s built into any Docker deployment, and it seamlessly integrates with other Docker tools like the Docker CLI and Docker Compose. It also provides the ability to interact with servers running in Docker swarm mode via Docker API calls. It has robust documentation with the benefit of ease of use and overall provides the appropriate functionality for our use case."}),Object(u.jsx)("h3",{id:"section-3-4",className:t,children:"3.4. How Docker Swarm Mode Works"}),Object(u.jsx)("p",{className:s,children:"Let\u2019s examine more closely how exactly Docker Swarm Mode works and how it can be used to deploy an application."}),Object(u.jsx)("p",{className:s,children:"A swarm is a collection of servers running Docker in swarm mode that act as Managers and Workers."}),Object(u.jsxs)("ul",{className:n,children:[Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsxs)("p",{className:c,children:[Object(u.jsx)("em",{children:"Nodes"})," are servers that have Docker installed and are part of the swarm. Manager nodes handle delegation of swarm services and management of membership to the swarm. "]})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsxs)("p",{className:c,children:["A ",Object(u.jsx)("em",{children:"service"})," is how applications are deployed in the swarm. A service is defined by specifying the image to deploy and how many instances of the application should run."]})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsxs)("p",{className:c,children:["A ",Object(u.jsx)("em",{children:"task"})," is the actual running container of the service that was defined. For any service, there will be one or more tasks. Services are deployed to the Manager Node which then schedules the service by creating tasks and spreading them out over the nodes in the swarm."]})})]}),Object(u.jsx)("img",{src:k,alt:"Docker Swarm",className:"".concat(r," large-img")}),Object(u.jsx)("p",{className:s,children:"Here, there are three servers - one Manager Node and two Worker Nodes. As shown in the diagram, the application \u201ccatnip\u201d is defined as a service and submitted to the Manager Node. As part of the service definition, the application image is set and three tasks are defined, meaning upon deployment, catnip should be scaled to three containers. The Manager Node then schedules the catnip service to run as three tasks on the available nodes. As seen here, the Worker and Manager Nodes can all run tasks. Applications can be easily scaled up or down at any time by changing the number of tasks running via a simple Docker command on the manager node."}),Object(u.jsx)("h3",{id:"section-3-5",className:t,children:"3.5. Application & Cluster Scaling"}),Object(u.jsx)("p",{className:s,children:"We can see how Sentinel works with Docker Swarm Mode to easily scale production applications as well as horizontally scale the Sentinel cluster in the demo below with Apps-R-Us."}),Object(u.jsx)(ee,{clipInfo:we,targetId:"scalingDemo"}),Object(u.jsx)("h2",{id:"section-4",className:e,children:"4. Inter-service Communication"}),Object(u.jsx)("p",{className:s,children:"We know that containers run in isolation and\u2013without further configuration\u2013don\u2019t know anything about other processes or containers in the swarm or even on the same machine. In this section, we\u2019ll explore how communication between services can be achieved."}),Object(u.jsx)("h3",{id:"section-4-1",className:t,children:"4.1. One Process Principle"}),Object(u.jsxs)("p",{className:s,children:["Since Sentinel supports applications with a Postgres database, the first thing to consider is Docker\u2019s One Process Principle, which states that \u201ceach container should do one thing and do it well.\u201d",Object(u.jsx)("sup",{children:Object(u.jsx)("a",{href:"#fn12",children:"12"})})," This means that for applications with a database, the database should be deployed as a separate service in the swarm. While technically a database can run in the same container as the application, ideally, they should be decoupled to allow for scaling applications and databases independently of each other and also to easily version applications (without affecting the database)."]}),Object(u.jsx)("img",{src:S,alt:"One Process Principle",className:"".concat(r," small-img")}),Object(u.jsx)("h3",{id:"section-4-2",className:t,children:"4.2. Overlay Networks"}),Object(u.jsxs)("p",{className:s,children:["Earlier, when describing container orchestrators, we touched on their container networking capabilities by way of overlay networks. To reiterate, an overlay network is a virtual layer 2 network that allows physically separated nodes to communicate as though they were physically connected via LAN. With the virtual layer 2 network in place, swarm services can communicate, without those services needing to be exposed to the broader internet.",Object(u.jsx)("sup",{children:Object(u.jsx)("a",{href:"#fn13",children:"13"})})," This is how an application and database service can communicate securely. This type of virtual networking minimizes security risks as there\u2019s no need to expose the ports of containers to the internet for the services to communicate, keeping them isolated. Each container is available on this overlay network at a virtual IP address, one which only other containers, connected to the same overlay network, are able to access. These virtual IP addresses are not accessible outside the swarm and so keep containers isolated. As mentioned earlier, container orchestrators use Service Discovery by way of DNS to map service names to container IP addresses. So a service merely needs to know the name of another service on the same overlay network to communicate with it."]}),Object(u.jsx)("p",{className:s,children:"Take, for example, the todos app in the below diagram. Upon deployment, a service is created for the application, a separate service is created for the database, and lastly, an application specific overlay network is created, to which both services are connected. Since no other applications will be connected to this particular network, the database remains isolated from other non-related applications, providing ideal security for the database. Thanks to Swarm\u2019s built in DNS resolution feature, the todos service just needs to know the service name of the database in order to connect to it over the network. To scale up the todos app, the user can simply increase the number of tasks running for the todos service and the new task will automatically connect to the todos overlay network."}),Object(u.jsx)("img",{src:C,alt:"Overlay Networks",className:"".concat(r," large-img content-center ml-12")}),Object(u.jsx)("p",{className:s,children:"At this point in the design process, we understand the role of the container orchestrator and how applications rely on it to communicate internally. In the next section, we will cover how end users can access their applications externally."}),Object(u.jsx)("h2",{id:"section-5",className:e,children:"5. Routing HTTP Requests"}),Object(u.jsx)("p",{className:s,children:"Obviously, hosting developers\u2019 applications is only useful if their end users have a way to access those apps, so the Sentinel Cluster must be able to accept requests, forward them to the appropriate applications, and do all of this securely."}),Object(u.jsx)("p",{className:s,children:"One way to accomplish the above goals would have been to use Docker\u2019s built in routing mesh. When Docker is in swarm mode, all nodes are connected to an ingress routing mesh. This is essentially an overlay network with a built-in load balancer that routes requests to the various tasks. For each service, a port is published and an ingress rule for that port is created on each node. Each node accepts connections on all published ports even if the node is not running a task that uses that port. When a node receives a request for a given service on the service\u2019s port, it will hand the request to the ingress load balancer. The ingress load balancer then determines which task should receive the request using a \u201cround robin\u201d approach, and the request is sent to that task over the ingress routing mesh."}),Object(u.jsxs)("p",{className:s,children:["So, each service\u2019s port could be exposed on each compute instance that is acting as a node, and the end users could access the applications via these ports. This approach would not have required any additional infrastructure; however, it would have been undesirable for a number of reasons. First of all, it is unintuitive and awkward for end users to have to include a port number in the URL when trying to get to an application. Secondly, from a security perspective, exposing ports on a server greatly increases its vulnerability to malicious entities on the internet.",Object(u.jsx)("sup",{children:Object(u.jsx)("a",{href:"#fn14",children:"14"})})]}),Object(u.jsx)("h3",{id:"section-5-1",className:t,children:"5.1. Incorporating a Reverse Proxy"}),Object(u.jsx)("p",{className:s,children:"A better way of forwarding requests to the appropriate applications is to use a reverse proxy. While this does involve introducing another piece of infrastructure to Sentinel\u2019s architecture, the benefits greatly outweigh any downsides."}),Object(u.jsx)("p",{className:s,children:"With a reverse proxy in place, individual applications can be mapped to distinct hostnames and the reverse proxy handles routing the requests to the appropriate applications. To facilitate this, developers specify a hostname for their application on the CLI at the time of deployment, having previously pointed that DNS record for their application\u2019s domain name to the Cluster\u2019s manager node. The reverse proxy can also handle encryption for HTTPS which relieves users\u2019 applications of this responsibility. This frees up their apps\u2019 web servers to focus on serving their content rather than spending resources on encryption."}),Object(u.jsxs)("p",{className:s,children:["The reverse proxy could have simply been installed on its own server and routed requests to the applications using the aforementioned ports that Docker publishes for each service. This would have required the creation of security rules where the cluster servers would only accept connections over these ports if the request was coming from the IP address of the server hosting the reverse proxy. However, this is not fully secure as it leaves the system vulnerable to IP spoofing attacks.",Object(u.jsx)("sup",{children:Object(u.jsx)("a",{href:"#fn15",children:"15"})})]}),Object(u.jsx)("img",{src:T,alt:"Reverse proxy on own server",className:"".concat(r)}),Object(u.jsx)("p",{className:s,children:"The better solution is to use a private network to connect the reverse proxy with applications that need to receive the forwarded requests. Given that Sentinel uses Docker Swarm Mode as a container orchestrator, the built-in overlay networks can be used to accomplish this. Sentinel runs the reverse proxy as a Docker service on the Manager node, creates a new overlay network, and adds the reverse proxy along with all internet facing apps to this network. The reverse proxy then uses Docker\u2019s built-in DNS system to route requests to the applications according to their Docker service name, taking full advantage of the security benefits of overlay networks already outlined above."}),Object(u.jsx)("img",{src:I,alt:"Reverse proxy 2",className:"".concat(r," large-img")}),Object(u.jsx)("h3",{id:"section-5-2",className:t,children:"5.2. Choosing a Reverse Proxy"}),Object(u.jsx)("p",{className:s,children:"When choosing a specific reverse proxy, we mainly considered Nginx, HAProxy, and Traefik given their maturity and popularity. While any of these three tools would have worked for Sentinel, Traefik was the best option for our use case for a number of reasons."}),Object(u.jsx)("p",{className:s,children:"First and foremost, it was specifically designed to integrate with container orchestrators. This integration is largely done via its \u201cproviders\u201d which interact directly with the supported orchestrators\u2019 APIs. It also has excellent service discovery and its routing rules can be updated dynamically. This means that new services can be discovered and traffic routed to them without having to restart the reverse proxy. Traefik also provides some support for integrating Let\u2019s Encrypt, including automatic certificate renewal, which aids Sentinel in providing HTTPS to users\u2019 apps out of the box."}),Object(u.jsx)("p",{className:s,children:"Having sorted out how the end users will be able to easily and securely access the applications, let\u2019s examine how Sentinel implements the various features involved with canary deployments."}),Object(u.jsx)("h2",{id:"section-6",className:e,children:"6. Canary Deployments"}),Object(u.jsx)("p",{className:s,children:"In order to properly support canary deployments, Sentinel provides the following functionalities:"}),Object(u.jsxs)("ul",{className:n,children:[Object(u.jsxs)("li",{className:"".concat(o," pl-4"),children:[Object(u.jsx)("p",{className:c,children:"Deploy a canary with an initial traffic weight and sticky sessions settings"}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{className:c,children:"Change the amount of traffic being diverted to the canary"})})]}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{className:c,children:"Promote the canary"})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{className:c,children:"Rollback the canary"})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{className:c,children:"Provide metrics and logs to developers for determining the health and performance of the canaries"})})]}),Object(u.jsx)("p",{className:s,children:"Let\u2019s take a look at each of these in turn."}),Object(u.jsx)(ee,{clipInfo:ye,targetId:"canaryDemo"}),Object(u.jsx)("h3",{id:"section-6-1",className:t,children:"6.1. Deploying a Canary"}),Object(u.jsxs)("p",{className:s,children:["Deploying a canary is done via the ",Object(u.jsx)("code",{children:"sentinel canary deploy"})," command. The canary deploy process starts with running the new version as a separate Docker service. The process continues by making use of at least one, and potentially two, overlay networks. Firstly, if the application uses a database, the canary is connected to that application-specific overlay network alongside the production version and database service, to facilitate inter-service communication, as depicted in the diagram below:"]}),Object(u.jsx)("img",{src:A,alt:"Overlay networks 2",className:"".concat(r," large-img center-content")}),Object(u.jsx)("p",{className:s,children:"Secondly, database or not, the new version is added to the reverse proxy overlay network. This gets traffic flowing to the canary, but, adding the canary to the overlay network isn\u2019t enough: the routing rules need to be updated such that requests for a given application are split between the production service and canary service. Sentinel largely accomplishes this using Traefik\u2019s routing abilities, so in order to explain how this is implemented, we need to cover some basic Traefik concepts."}),Object(u.jsx)("h4",{className:a,children:"Traefik Configuration Overview"}),Object(u.jsx)("p",{className:s,children:"Traefik\u2019s configuration is broken up into two separate categories: its \u201cstatic\u201d configuration, which is set when Traefik is first started up and cannot be adjusted without restarting the service, and its \u201cdynamic\u201d configuration which can be adjusted while the service is running. The \u201cstatic\u201d configuration contains general settings for logging, metrics, certificate resolvers, and entry points, among other things, and it is where the providers are defined."}),Object(u.jsx)("img",{src:P,alt:"Traefik Providers Configuration",className:"".concat(r)}),Object(u.jsx)("p",{className:s,children:"Providers are essentially the different places that Traefik looks to get its dynamic configuration. They are called \u201cproviders\u201d because they provide the configuration to Traefik. According to Traefik\u2019s documentation, providers are, \u201cinfrastructure components, whether orchestrators, container engines, cloud providers, or key-value stores.\u201d Essentially, the providers are defined in the \u201cstatic\u201d configuration, and then Traefik queries the providers at regular intervals, either via their APIs or by watching a particular file directory, for information relevant to routing. When Traefik detects a change, it updates its routes. The way that each provider provides its dynamic configuration varies."}),Object(u.jsx)("p",{className:s,children:"Of the providers that Sentinel uses, the first one we\u2019ll talk about is the File provider. Traefik is told to watch a certain directory, and it adjusts accordingly if certain configuration files in this directory are added, removed or edited. For example, in the case of canaries, Traefik watches a file that indicates how to split the traffic between the production and canary services."}),Object(u.jsx)("p",{className:s,children:"The other provider Sentinel uses is Docker. Specifying Docker as a provider puts Traefik on the lookout for new applications deployed with Sentinel. Specifying that Docker is running in Swarm Mode is also done in the static configuration. When new Docker services are actually deployed, Traefik gets new dynamic configurations through labels that are added to those Docker services. These labels can be added, edited, or removed while the Docker service is running which allows for dynamic updates to the routing rules associated with a given service. Now that we've given an overview of Traefik\u2019s configuration, let\u2019s examine how this applies to canary deployments."}),Object(u.jsx)("h4",{className:a,children:"Traefik Configuration for Canaries"}),Object(u.jsxs)("p",{className:s,children:["When deploying a canary, Sentinel adds a dynamic configuration file that defines traffic splitting weights for the production and canary services for an application. Users can also change these weights after the canary has been deployed using the ",Object(u.jsx)("code",{children:"sentinel canary traffic"})," command. This configuration file will also include sticky session settings if the developer has selected that feature for this canary."]}),Object(u.jsx)("img",{src:D,alt:"Traefik dynamic config file",className:"".concat(r)}),Object(u.jsx)("p",{className:s,children:"Sentinel then starts the canary service and adds labels to the production and canary Docker services (another dynamic configuration) which tell Traefik to use the traffic splitting weights defined in the configuration file."}),Object(u.jsx)("img",{src:R,alt:"Traefik labels",className:"".concat(r)}),Object(u.jsx)("h3",{id:"section-6-2",className:t,children:"6.2. Promoting a Canary"}),Object(u.jsx)("p",{className:s,children:"With deploying a canary now covered, let\u2019s discuss the ability to promote canaries. To start, Sentinel updates the configuration for the production service so that it uses the new image version. This starts a rolling update process where each production task is one-by-one replaced by a task running the new version."}),Object(u.jsx)("img",{src:W,alt:"Canary Promote",className:"".concat(r," large-img")}),Object(u.jsx)("p",{className:s,children:"Once all tasks have been updated, the canary service and the traffic splitting configuration file are both removed."}),Object(u.jsx)("h3",{id:"section-6-3",className:t,children:"6.3. Rolling a Canary Back"}),Object(u.jsx)("p",{className:s,children:"The last bit of canary-specific functionality Sentinel provides is the ability to roll a canary deployment back should it not meet the developer\u2019s standards for promotion. This is a very straight-forward process. Sentinel simply removes the Traefik configuration file that sets the traffic splitting behavior, which will revert 100% of the traffic back to the production service, and then remove the canary service."}),Object(u.jsx)("p",{className:s,children:"Of course, in order to fully support canary deployments, Sentinel users need to be able to analyze the canary version\u2019s performance and health. For that, Sentinel provides monitoring tools, which will be covered in detail in the next section."}),Object(u.jsx)("h2",{id:"section-7",className:e,children:"7. Monitoring"}),Object(u.jsx)("h3",{id:"section-7-1",className:t,children:"7.1. Monitoring Architecture Overview"}),Object(u.jsxs)("p",{className:s,children:["Up until now we\u2019ve discussed how a user can scale compute instances, scale apps, and promote and roll back canaries, using Sentinel. The final piece to the puzzle is to consider, ",Object(u.jsx)("em",{children:"how does Sentinel assist users in making decisions about when to act on the aforementioned functionality?"})]}),Object(u.jsx)("p",{className:s,children:"For this part of the discussion, we\u2019ll focus on three monitoring tools, deployed as Docker services into the Sentinel Cluster: Node Exporter, Prometheus, and Grafana. These three tools work together, building off one another, to deliver metrics to the developers using Sentinel. The following diagram illustrates the basic flow of data, which will be explained more below:"}),Object(u.jsx)("img",{src:f,alt:"Monitoring Tools",className:r+" large-img"}),Object(u.jsxs)("p",{className:s,children:["Unlike Prometheus and Grafana, which only run on the manager node, ",Object(u.jsx)("strong",{children:"Node Exporter"})," is deployed onto every node in the cluster. The reason for this is that Node Exporter provides ",Object(u.jsx)("em",{children:"system level"})," metrics, like disk space available, memory available, and CPU usage. If there are two nodes deployed within the Cluster, running ",Object(u.jsx)("code",{children:"sentinel cluster inspect"})," will return information like the following:"]}),Object(u.jsx)("img",{src:q,alt:"cluster inspect output",className:r+" small-img"}),Object(u.jsxs)("p",{className:s,children:["So, as the name suggests, Node-Exporter ",Object(u.jsx)("em",{children:"exports"}),", or produces metrics about the node on which it is installed. But the above output isn\u2019t produced with Node-Exporter alone. Node-Exporter exports ",Object(u.jsx)("em",{children:"raw"})," metrics, and some way to ",Object(u.jsx)("em",{children:"scrape"}),", or ",Object(u.jsx)("em",{children:"read"})," those metrics, and then ",Object(u.jsx)("em",{children:"analyze"})," them is also required, in order to turn that raw stream into what is shown above. This is where ",Object(u.jsx)("strong",{children:"Prometheus"})," comes in. Prometheus scrapes metrics from two sources in Sentinel\u2019s architecture:"]}),Object(u.jsxs)("ul",{className:n,children:[Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsxs)("p",{className:c,children:["Traefik for ",Object(u.jsx)("em",{children:"application level"})," metrics, such as: request response-time, and response status codes. It would not be ideal to ask users to manually instrument their applications, which would require them to modify their code to make it deliver metrics in a way that Prometheus understands.",Object(u.jsx)("sup",{children:Object(u.jsx)("a",{href:"#fn16",children:"16"})})," Instead, these metrics are captured at the level of the reverse proxy."]})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{className:c,children:"Node Exporter for the abovementioned system level metrics."})})]}),Object(u.jsx)("p",{className:s,children:"These metrics, once scraped, can then be analyzed with Prometheus\u2019s query language, PromQL. Essentially, PromQL allows the user to filter and transform data from a stream of metrics, into something more insightful. For example, a user might want to see only 404 status codes from a particular application, and only from the last 5 minutes."}),Object(u.jsx)("p",{className:s,children:"Sentinel provides developers access to Prometheus\u2019s default dashboard:"}),Object(u.jsx)("img",{src:_,alt:"Prometheus Dashboard",className:"".concat(r)}),Object(u.jsx)("p",{className:s,children:"Here you can see some metrics that have come into Prometheus from Traefik. Traefik is labeled as the scrape job, and each applications\u2019 metrics have been configured to include labels, which allows users to sort by application. There\u2019s also some PromQL code surrounding these metrics to say that we want to know the sum total of all the status codes sent out by this application, sorted by code, for the last hour."}),Object(u.jsx)("p",{className:s,children:"Once metrics have been collected and analyzed in Prometheus, Sentinel is set up to display them in a more friendly manner to the developers with Grafana. Grafana is primarily a tool for visualizing datasources, and in this case, Prometheus is the datasource."}),Object(u.jsx)("img",{src:U,alt:"Grafana Dashboard",className:"".concat(r)}),Object(u.jsx)("p",{className:s,children:"From Sentinel\u2019s Grafana dashboard (pictured more fully below, in the next section) a developer can select the application they want to know about from a dropdown menu, which is automatically populated with all their currently deployed apps. By default, the dashboard shows how many requests a given app has received in the last five minutes, the average response time for those requests, and data about response status codes issued from this app over the last five minutes, and the last hour."}),Object(u.jsxs)("p",{className:s,children:["By running ",Object(u.jsx)("code",{children:"sentinel metrics"})," developers can set custom hostnames and a password to reach their Prometheus and Grafana dashboards, which are automatically populated with data from any currently deployed apps."]}),Object(u.jsx)("h3",{id:"section-7-2",className:t,children:"7.2. Monitoring a Canary Instance"}),Object(u.jsx)("p",{className:s,children:"Sentinel provides three ways to help developers decide when to promote or roll back a canary."}),Object(u.jsx)("h4",{className:a,children:"Compare production and canary side-by-side"}),Object(u.jsx)("p",{className:s,children:"First, they can compare the production and canary side-by-side, in their Grafana dashboard. Again, as soon as a canary is deployed, Sentinel automatically begins collecting these metrics, and makes them available within these tools."}),Object(u.jsx)("img",{src:z,alt:"Failed canary",className:"".concat(r)}),Object(u.jsx)("p",{className:s,children:"Here we have the production version on the left, and the canary on the right. Initially, it seemed the canary was doing well, but the upward sloping red line on the right, and a growing red pie chart, indicate that the canary version has started responding with 404s."}),Object(u.jsx)("h4",{className:a,children:"Dig deeper with logs"}),Object(u.jsxs)("p",{className:s,children:["If a developer wants to dig deeper, to figure out what specifically was leading to those 404s, they can run ",Object(u.jsx)("code",{children:"sentinel inspect logs"}),". They\u2019ll be prompted to select the name of their application, and immediately get logs from that application in their terminal."]}),Object(u.jsx)("h4",{className:a,children:"Look for resource drain"}),Object(u.jsxs)("p",{className:s,children:["Finally, maybe an app is performing well for end-users, but a developer wants to know if it is consuming too many system resources. For this, a developer can run the command ",Object(u.jsx)("code",{children:"sentinel inspect app"}),", and get a report about their application, along with metrics about the node on which it is hosted."]}),Object(u.jsx)("img",{src:L,alt:"inspect app command output",className:"".concat(r)}),Object(u.jsx)("p",{className:s,children:"The above illustrates the general flow of monitoring a canary\u2019s health using Sentinel. But, of course, a developer can use these same commands to help make decisions about when to scale a compute instance, or when to scale a non-canary, standard production app (e.g., if a node\u2019s disk space is full, or if the production applications are competing too heavily for system resources)."}),Object(u.jsx)("h2",{id:"section-8",className:e,children:"8. Getting Started with Sentinel"}),Object(u.jsx)("p",{className:s,children:"With Sentinel, deployments are easy, and updates are safe. Sentinel\u2019s cloud-agnostic and open-source design means developers retain control and flexibility over their applications. Sentinel\u2019s integration of canary deployments and monitoring tools means that developers can upgrade their applications with confidence."}),Object(u.jsx)("p",{className:s,children:"Developers can get started with Sentinel by following a few simple steps:"}),Object(u.jsxs)("ul",{className:"".concat(i),children:[Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{className:c,children:"Install Terraform and Ansible."})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsxs)("p",{className:c,children:["Ensure you have the necessary ",Object(u.jsx)("a",{className:l,href:"https://github.com/Sentinel-PaaS/Sentinel-cli",rel:"noreferrer",target:"_blank",children:"cloud-provider credentials"})," in place."]})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsxs)("p",{className:c,children:["Download and install the npm package by running ",Object(u.jsx)("code",{children:"npm i @sentinel-paas/sentinel-cli -g"}),"."]})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsxs)("p",{className:c,children:["Run ",Object(u.jsx)("code",{children:"sentinel init"}),"."]})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsxs)("p",{className:c,children:["Run ",Object(u.jsx)("code",{children:"sentinel deploy"}),"."]})})]}),Object(u.jsxs)("p",{className:s,children:["For more detailed instructions, see our ",Object(u.jsx)("a",{className:l,href:"https://github.com/Sentinel-PaaS/Sentinel-cli",target:"_blank",rel:"noreferrer",children:"Github page"}),", and for more information on the commands available within Sentinel, run ",Object(u.jsx)("code",{children:"sentinel --help"}),"."]}),Object(u.jsx)("h2",{id:"section-9",className:e,children:"9. Upcoming Work"}),Object(u.jsx)("p",{className:s,children:"And that\u2019s Sentinel! Of course, we\u2019re always working to improve the platform, and here is some of our upcoming work:"}),Object(u.jsxs)("ul",{className:"".concat(n),children:[Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsxs)("p",{className:c,children:[Object(u.jsx)("em",{children:"Support for other cloud providers (Google Cloud, Microsoft Azure, Digital Ocean, etc)"}),": this is a core part of our vision, and fortunately it is well within reach. Because compute instances are provisioned using Terraform, rather than a specific cloud providers interface, to accomplish this goal we\u2019ll just need to create distinct Terraform files, updating what we already have according to the specifications of the different providers. The rest of the control plane logic will be able to remain the same."]})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsxs)("p",{className:c,children:[Object(u.jsx)("em",{children:"Deploy the canary along with a baseline version of the production app, each on their own compute instances"}),": while this is not essential, it is currently considered best practice, as it allows you to isolate any differences between the canary and the production app more precisely.",Object(u.jsx)("sup",{children:Object(u.jsx)("a",{href:"#fn17",children:"17"})})," For example, a canary could be slow, but only because it is on an overcrowded node. We\u2019re already splitting traffic and creating new instances, so this functionality will just require a little more of that."]})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsxs)("p",{className:c,children:[Object(u.jsx)("em",{children:"Integrate buildpacks, to allow users to deploy from github code or a zip file"}),": with buildpacks, users wouldn\u2019t have to know how to use Docker, they could just provide a zip file or a link to their code on github. This would, naturally, further increase the accessibility of Sentinel."]})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{className:c,children:Object(u.jsx)("em",{children:"Support apps that use other databases (MySql, Mongo, etc)"})})})]}),Object(u.jsx)("br",{}),Object(u.jsx)("div",{id:"divide"}),Object(u.jsx)("br",{}),Object(u.jsxs)("ul",{className:"".concat(i),children:[Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{id:"fn1",className:c,children:"https://www.networkworld.com/article/2163430/paas-primer--what-is-platform-as-a-service-and-why-does-it-matter-.html"})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{id:"fn2",className:c,children:"https://harness.io/blog/continuous-verification/blue-green-canary-deployment-strategies/"})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{id:"fn3",className:c,children:"For Sentinel\u2019s use case, the ability to have fine grained control over the percentage of traffic seemed most important. But it is also possible to split traffic along other dimensions, such as geographic region or IP address."})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{id:"fn4",className:c,children:"https://aws.amazon.com/blogs/aws/ec2-classic-is-retiring-heres-how-to-prepare/"})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{id:"fn5",className:c,children:"https://blog.heroku.com/adventures-of-rendevous"})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{id:"fn6",className:c,children:"https://blog.heroku.com/faster-dynos-for-all"})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{id:"fn7",className:c,children:"At present, Sentinel\u2019s start up scripts include Terraform configurations for AWS, and our team has plans to add configurations for other providers in the near future."})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{id:"fn8",className:c,children:"https://docs.docker.com/engine/reference/commandline/dockerd/"})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{id:"fn9",className:c,children:"https://www.ibm.com/cloud/blog/containers-vs-vms"})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{id:"fn10",className:c,children:"https://jvns.ca/blog/2016/10/10/what-even-is-a-container/"})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{id:"fn11",className:c,children:"https://newrelic.com/blog/best-practices/container-orchestration-explained"})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{id:"fn12",className:c,children:"https://docs.docker.com/get-started/07_multi_container/"})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{id:"fn13",className:c,children:"https://docker-tutorial.schoolofdevops.com/swarm-networking-deepdive/"})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{id:"fn14",className:c,children:"https://thecyphere.com/blog/open-ports/"})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{id:"fn15",className:c,children:"https://www.cloudflare.com/learning/ddos/glossary/ip-spoofing/"})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{id:"fn16",className:c,children:"https://sysdig.com/blog/prometheus-metrics/"})}),Object(u.jsx)("li",{className:"".concat(o," pl-4"),children:Object(u.jsx)("p",{id:"fn17",className:c,children:"https://spinnaker.io/docs/guides/user/canary/best-practices/"})})]}),Object(u.jsx)("br",{})]})})]})};var Oe=function(){return Object(u.jsx)("div",{id:"presentation",className:"bg-gray-200",children:Object(u.jsxs)("div",{className:"flex flex-col py-24 max-w-screen-xl mx-auto",children:[Object(u.jsx)("h2",{className:" text-center text-6xl text-gray-800 mb-12 font-extrabold",children:"Presentation"}),Object(u.jsx)("div",{className:"mx-20 videoWrapper",children:Object(u.jsx)("iframe",{className:"absolute rounded-lg border-2 border-gray-700 shadow-lg w-full h-full",src:"https://www.youtube.com/embed/1vaIc_sCDag",title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"})})]})})},Ne=a(3),ke=a.p+"static/media/mf_headshot_square.e6217648.jpg",Se=a.p+"static/media/brendan.e703dba6.jpg",Ce=a.p+"static/media/sam.4baee2dc.jpg",Te=a.p+"static/media/drew_headshot.7aa7baec.png",Ie=a.p+"static/media/email.21f403d1.svg",Ae=a.p+"static/media/website.da1ff378.svg",Pe=a.p+"static/media/github.2624d8dd.svg",De=a.p+"static/media/linkedin.36e3c5fe.svg";var Re=function(e){var t=e.image,a=e.name,s=e.location,n=e.email,i=e.linkedin,c=e.github,o=e.website;return Object(u.jsxs)("li",{className:"flex flex-col bg-gray-800 rounded-xl py-9 px-4 text-center",children:[Object(u.jsx)("img",{className:"mx-auto h-48 w-48 rounded-full xl:w-56 xl:h-56 lazy",src:t,alt:""}),Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("h3",{className:"text-white mt-9",children:a}),Object(u.jsx)("p",{className:"text-green-300 my-3",children:s})]}),Object(u.jsxs)("ul",{className:"bg-white-100 mx-auto mt-6 flex w-48 justify-between items-center",children:[Object(u.jsx)("li",{children:Object(u.jsx)("a",{href:"mailto:".concat(n),target:"_blank",children:Object(u.jsx)("img",{className:"w-8",src:Ie,alt:"email icon"})})}),Object(u.jsx)("li",{children:Object(u.jsx)("a",{href:i,target:"_blank",children:Object(u.jsx)("img",{className:"w-6",src:De,alt:"linkedin icon"})})}),Object(u.jsx)("li",{children:Object(u.jsx)("a",{href:c,target:"_blank",children:Object(u.jsx)("img",{className:"w-8",src:Pe,alt:"github icon"})})}),Object(u.jsx)("li",{children:Object(u.jsx)("a",{href:o,target:"_blank",children:Object(u.jsx)("img",{className:"w-8",src:Ae,alt:"website icon"})})})]})]})]})},We=[{image:ke,name:"Michael Fatigati",location:"Austin, TX",email:"fatigati.michael@gmail.com",linkedin:"https://www.linkedin.com/in/michael-fatigati/",github:"https://github.com/MFatigati",website:"https://www.michaelfatigati.dev/"},{image:Se,name:"Brendan Leal",location:"Southern California",email:"leal.brendan@gmail.com",linkedin:"https://www.linkedin.com/in/brendan-leal-667694223",github:"https://github.com/Brendan-Leal",website:"https://www.brendanleal.dev"},{image:Ce,name:"Samantha Lipari",location:"NYC Metropolitan Area",email:"samanthalipari@gmail.com",linkedin:"https://www.linkedin.com/in/samantha-lipari/",github:"https://github.com/samlipari",website:"https://www.samanthalipari.com"},{image:Te,name:"Drew Sessler",location:"Seattle, WA",email:"drew.sessler@gmail.com",linkedin:"https://www.linkedin.com/in/drew-sessler-3816601b/",github:"https://github.com/dsessler7",website:"https://www.drewsessler.com/"}];var qe=function(){return Object(u.jsx)("div",{id:"our-team",className:"flex flex-col px-4 bg-gray-900 text-gray-300 text-2xl",children:Object(u.jsxs)("div",{className:"px-4 py-16 max-w-7xl xl:max-w-none xl:w-11/12 mx-auto",children:[Object(u.jsxs)("div",{className:"",children:[Object(u.jsx)("h2",{className:"font-extrabold text-white text-5xl leading-9",children:"Meet our team"}),Object(u.jsx)("p",{className:"mt-8 w-8/12",children:"We are currently looking for opportunities. If you liked what you saw and want to talk more, please reach out!"})]}),Object(u.jsx)("ul",{className:"mt-14 flex flex-col gap-4 md:flex-row md:grid md:grid-cols-2 xl:grid-cols-4 md:gap-x-8 md:gap-y-12",children:We.map((function(e,t){return Object(s.createElement)(Re,Object(Ne.a)(Object(Ne.a)({},e),{},{key:t}))}))})]})})};var _e=function(){return Object(s.useEffect)((function(){return window.addEventListener("scroll",(function(){return r(o,10)})),function(){window.removeEventListener("scroll",o)}}),[]),Object(u.jsxs)("div",{className:"App bg-slate",children:[Object(u.jsx)(j,{}),Object(u.jsx)(x,{}),Object(u.jsx)(ve,{}),Object(u.jsx)(Oe,{}),Object(u.jsx)(qe,{})]})};c.a.render(Object(u.jsx)(n.a.StrictMode,{children:Object(u.jsx)(_e,{})}),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.efd6f7b5.chunk.js.map